<!-- src/app/property-details/property-details.component.html -->

<section class="details" *ngIf="property(); else notFound">
  <div class="header">
    <h1 class="title">{{ property()!.title }}</h1>
    <p class="address">
      {{ property()!.address }}, {{ property()!.city }}
    </p>
  </div>

  <div class="layout">
    <!-- Left side: big hero image -->
    <div class="media">
      <img
        class="hero-image"
        [src]="property()!.thumbnail"
        [alt]="property()!.title"
      />
    </div>

    <!-- Right side: core info + CTAs -->
    <div class="info">
      <div class="price">
        ${{ property()!.price | number:'1.0-0' }}
      </div>

      <div class="stats">
        <span>{{ property()!.beds }} bd</span>
        <span>{{ property()!.baths }} ba</span>
        <span>{{ property()!.area }} m²</span>
      </div>

      <p class="description">
        <!-- Placeholder description for now. Later this can come from the backend. -->
        Beautifully presented property with modern finishes and an open layout.
        Explore the full 360° virtual tour to get a realistic feel of the space
        before visiting in person.
      </p>

      <!-- Button to open legacy full-screen viewer (optional) -->
      <a
        *ngIf="tourLink"
        class="btn-primary"
        [routerLink]="tourLink"
      >
        Open full-screen 360° tour
      </a>

      <a class="back-link" [routerLink]="['/gallery']">
        ← Back to gallery
      </a>
    </div>
  </div>

  <!--
    Inline virtual tour
    --------------------
    This uses the VirtualTourComponent with [panoIndex] input.
    It will show the correct pano for this property based on panoId.
  -->
  <div class="inline-tour" *ngIf="panoIndex !== null">
    <h2 class="inline-title">360° Virtual Tour</h2>
    <app-virtual-tour [panoIndex]="panoIndex"></app-virtual-tour>
  </div>
</section>

<!-- Fallback when id is invalid or property not found -->
<ng-template #notFound>
  <section class="details">
    <h1>Property not found</h1>
    <p>The property you are looking for does not exist.</p>
    <a class="back-link" [routerLink]="['/gallery']">
      ← Back to gallery
    </a>
  </section>
</ng-template>
